{% extends 'ccis/base.html' %}
{% load static %}

{% block conteudo %}

{% if messages %}
    {% for message in messages %}
    <!-- Toasts --------------------------------->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
      <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">

        <div class="toast-header">
          <i class="fa-solid fa-square-check" style="color:{{ cor }}"></i>
          <strong class="me-auto" style="color:{{ cor }}">Mensagem</strong>
          <small>{{ data }}</small>
          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>

        <div class="toast-body">
          {{ message }}
        </div>

      </div>
    </div>
    {% endfor %}
  {% endif %}

  <script>
     $(document).ready(function(){
       $('.toast').toast('show');
     });
  </script>

<div class="col">
    <!-- subMenu ---------------------------------------------------------------------------------------------------->
    <div class="row">

        <nav class="navbar sub-nav-background mb-2 ps-0 pe-0">
          <div class="container-fluid">

            <p class="m-0" style="font-family:Asap medium"> USUÁRIOS <br>
                <small style="font-family:Asap Regular; color:#AFAFAF;">Modulo gestor</small></p>

            <div class="navbar-nav-wrap-content-end">
                 <!-- Botão Novo Usuário ----------------------->
                <button class="button-style"
                        type="button"
                        data-bs-toggle="modal"
                        data-bs-target="#exampleModal"
                        data-bs-whatever="@mdo">
                    <i class="fa-solid fa-user-plus"></i> Novo Usuário
                </button>

                <!-- Modal formulário Novo Usuário ------------->
                <div class="modal fade"
                     id="exampleModal"
                     tabindex="-1"
                     aria-labelledby="exampleModalLabel"
                     aria-hidden="true">

                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">

                            <div class="modal-header">
                                <h5 class="modal-title" style="text-aline:center" id="exampleModalLabel">Cadastre um novo usuário</h5>
                                <button type="button"
                                        class="btn-close"
                                        data-bs-dismiss="modal"
                                        aria-label="Close">
                                </button>
                            </div>

                            <div class="modal-body">

                                <form method="post"
                                      action="{% url 'usuario' %}"
                                      class="row g-3 needs-validation"
                                      enctype="multipart/form-data"
                                      novalidate>
                                    {% csrf_token %}


                                    <!-- Dados Pessoais -->
                                    <div class="row pt-5">
                                        <h5>Dados Pessoais</h5>

                                        <div class="col-6">
                                            <label class="form-label">Nome Completo:</label>
                                            {{form.nomeCompleto}}
                                        </div>


                                        <div class="col-2">
                                            <label class="form-label">Sexo:</label>
                                            {{form.sexo}}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Estado Civil:</label>
                                            {{form.estadoCivil}}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Raça/Cor:</label>
                                            {{form.corRaca}}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Nascimento:</label>
                                            {{form.dataNascimento}}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Naturalidade:</label>
                                            {{form.naturalidade}}
                                        </div>

                                        <div class="col-4">
                                        </div>

                                        <div class="col-3 mb-4">
                                            <label class="form-label">Tipo Sanguíneo:</label>
                                            {{form.tipoSanguineo}}
                                        </div>

                                        <hr>

                                        <div class="col-6">
                                            <label class="form-label">Nome Pai:</label>
                                            {{form.nomePai}}
                                        </div>

                                        <div class="col-6 mb-4">
                                            <label class="form-label">Nome Mãe:</label>
                                            {{form.nomeMae}}
                                        </div>

                                        <hr>

                                        <div class="col-4">
                                            <label class="form-label">CPF:</label>
                                            {{form.cpf}}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">RG:</label>
                                            {{form.rg}}
                                        </div>

                                        <div class="col-5">
                                            <label class="form-label">Órgão Expedidor:</label>
                                            {{form.expedidor}}
                                        </div>

                                        <div class="col-7">
                                            <label class="form-label">CNH:</label>
                                            {{form.cnh}}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Validade:</label>
                                            {{form.validadeCnh}}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Categoria:</label>
                                            {{form.categoria}}
                                        </div>


                                        <div class="col-7">
                                            <label class="form-label">Titulo de Eleitor:</label>
                                            {{form.tituloEleitor}}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Zona:</label>
                                            {{form.zona}}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Seção:</label>
                                            {{form.secao}}
                                        </div>

                                        <div class="col-7">
                                            <label class="form-label">CTPS:</label>
                                            {{form.ctps}}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Serie:</label>
                                            {{form.serieCTPS}}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Data:</label>
                                            {{form.dataCTPS}}
                                        </div>


                                        <div class="col-7">
                                            <label class="form-label">Reservista:</label>
                                            {{form.reservista}}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">RA:</label>
                                            {{form.ra}}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Serie:</label>
                                            {{form.serieReservista}}
                                        </div>

                                        <div class="col-4">
                                            <label class="form-label">PIS:</label>
                                            {{form.pis}}
                                        </div>

                                        <div class="col-4">
                                        </div>

                                        <div class="col-4">
                                            <label class="form-label">Carteira Nacional de Saúde:</label>
                                            {{form.cns}}
                                        </div>

                                        <div class="form-check ms-2 pt-3">
                                            {{form.pcd}}
                                            <label class="form-check-label">
                                                Possui Deficiência Física?
                                            </label>
                                        </div>
                                    </div>

                                    <!-- Dependentes -->
                                    <div class="row pt-5">
                                        <hr>
                                        <h5>Dependentes</h5>
                                        <div class="col-6">
                                            <label class="form-label">Nome Completo:</label>
                                            {{dependentes.nomeCompleto}}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">CPF:</label>
                                            {{dependentes.cpf}}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Nascimento:</label>
                                            {{dependentes.dataNascimento}}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Relação:</label>
                                            {{dependentes.relacao}}
                                        </div>

                                        <div class="col-6">
                                            <label class="form-label">Email:</label>
                                            {{dependentes.email}}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Contato:</label>
                                            {{dependentes.contato}}
                                        </div>
                                    </div>

                                    <!-- Endereço e Contato -->
                                    <div class="row pt-5">
                                        <hr>
                                        <h5>Endereço e Contatos</h5>

                                        <div class="col-6">
                                            <label class="form-label">Endereço:</label>
                                            {{ contatoEndereco.endereco }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Bairro:</label>
                                            {{ contatoEndereco.bairro }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Cidade:</label>
                                            {{ contatoEndereco.cidade }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Cep:</label>
                                            {{ contatoEndereco.cep }}
                                        </div>

                                        <div class="col-2 mb-4">
                                            <label class="form-label">Estado:</label>
                                            {{ contatoEndereco.estado }}
                                        </div>

                                        <div class="col-5">
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Ramal:</label>
                                            {{ contatoEndereco.ramal }}
                                        </div>

                                        <span><small>Contato:</small></span>
                                        <hr>

                                        <div class="col-6">
                                            <label class="form-label">Email Corporativo:</label>
                                            {{ contatoEndereco.emailCorporativo }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Tel. Corporativo:</label>
                                            {{ contatoEndereco.telefoneCorporativo }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Cel. Corporativo:</label>
                                            {{ contatoEndereco.celularCorporativo }}
                                        </div>


                                        <div class="col-6">
                                            <label class="form-label">Email Pessoal:</label>
                                            {{ contatoEndereco.emailPessoal }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Tel. Pessoal:</label>
                                            {{ contatoEndereco.telefonePessoal }}
                                        </div>

                                        <div class="col-3 mb-3">
                                            <label class="form-label">Cel. Pessoal:</label>
                                            {{ contatoEndereco.celularPessoal }}
                                        </div>


                                        <span><small>Contato de Emergência</small></span>
                                        <hr>


                                        <div class="col-6">
                                            <label class="form-label">Nome Completo:</label>

                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Contato:</label>
                                            {{ contatoEndereco.telefoneDeEmergencia }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Relação:</label>
                                            {{ contatoEndereco.relacao }}
                                        </div>
                                    </div>

                                    <!-- Escolaridade -->
                                    <div class="row pt-5">
                                        <hr>
                                        <h5>Escolaridade</h5>
                                        <div class="col-6">
                                            <label class="form-label">Entidade de Ensino:</label>
                                            {{ escolaridade.entidadeDeEnsino }}
                                        </div>

                                        <div class="col-4">
                                            <label class="form-label">Curso:</label>
                                            {{ escolaridade.curso }}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Grau:</label>
                                            {{ escolaridade.grau }}
                                        </div>

                                        <div class="col-3 mb-3 ">
                                            <label class="form-label">Inicio:</label>

                                        </div>

                                        <div class="col-3 mb-3 ">
                                            <label class="form-label">Conclusão:</label>
                                            {{ escolaridade.dataConclusao }}
                                        </div>

                                        <span><small>Outros Idiomas</small></span>
                                        <hr>

                                        <div class="col-6 mb-3 ">
                                            <label class="form-label">Lingua:</label>
                                            {{ escolaridade.idiomaSecundario }}
                                        </div>


                                        <div class="col-2">
                                            <label class="form-label">Nivel:</label>
                                            {{ escolaridade.nivelSecundario }}
                                        </div>
                                    </div>

                                    <!-- Profissional -->
                                    <div class="row pt-5">
                                        <hr>
                                        <h5>Profissional</h5>

                                        <div class="col-6">
                                            <label class="form-label">Cargo:</label>
                                            {{ profissional.cargo }}
                                        </div>

                                        <div class="col-4">
                                            <label class="form-label">Área:</label>
                                            {{ profissional.area }}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">PA|Unidade:</label>
                                            {{ profissional.paUnidade }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Colaborador:</label>
                                            {{ profissional.colaborador }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Centro de custo:</label>
                                            {{ profissional.centroDeCusto }}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Matricula:</label>
                                            {{ profissional.matricula }}
                                        </div>

                                        <div class="col-4">
                                            <label class="form-label">Superior Imediato:</label>
                                            {{ profissional.superiorImediato }}
                                        </div>

                                        <div class="col-4">
                                            <label class="form-label">Folha de pagamento:</label>
                                            {{ profissional.folhaDePagamento }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Admissão:</label>
                                            {{ profissional.admissao }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Desligamento:</label>
                                            {{ profissional.desligamento }}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Situação:</label>
                                            {{ profissional.situacao }}
                                        </div>

                                        <div class="col-5">
                                            <label class="form-label">Empregador:</label>
                                            {{ profissional.empregador }}
                                        </div>

                                        <div class="col-3">
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Horário Entrada:</label>
                                            {{ profissional.horarioEntrada }}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Horário Saída:</label>
                                            {{ profissional.horarioSaida }}
                                        </div>
                                    </div>

                                    <!-- Dados Bancários -->
                                    <div class="row pt-5">
                                        <hr>
                                        <h5>Dados Bancarios</h5>
                                        <div class="col-6">
                                            <label class="form-label">Conta:</label>
                                            {{ dadosBancarios.conta }}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Digito:</label>
                                            {{ dadosBancarios.digito }}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Banco:</label>
                                            {{ dadosBancarios.banco }}
                                        </div>

                                        <div class="col-2">
                                            <label class="form-label">Agencia:</label>
                                            {{ dadosBancarios.agencia }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Tipo de Conta:</label>
                                            {{ dadosBancarios.tipoDeConta }}
                                        </div>

                                        <div class="col-3">
                                            <label class="form-label">Modalidade:</label>
                                            {{ dadosBancarios.modalidade }}
                                        </div>

                                        <div class="col-2">
                                        </div>

                                        <div class="col-4">
                                            <label class="form-label">Chave Pix:</label>
                                            {{ dadosBancarios.chavePix }}
                                        </div>
                                    </div>

                                    <!-- Midia -->
                                    <div class="row pt-5">
                                        <hr>
                                        <h5>Midia</h5>

                                        <div class="col-6 mb-3">
                                            <label class="form-check-label">Carregar Foto:</label>
                                            {{ midia.foto }}
                                            <div class="invalid-feedback">Nenhum arquivo selecionado</div>
                                        </div>

                                        <div class="col-6 mb-3">
                                            <label class="form-check-label">Carregar Background:</label>
                                            {{ midia.canvas }}
                                            <div class="invalid-feedback">Nenhum arquivo selecionado</div>
                                        </div>

                                    </div>

                                    <!-- Outros -->
                                    <div class="row pt-5">
                                        <hr>
                                        <h5>Outros</h5>
                                        <div class="col-2">
                                            <label class="form-label">Tamanho Camiseta:</label>
                                            {{ outros.camiseta }}
                                        </div>
                                    </div>


                                    <div class="modal-footer">

                                        <button type="button" class="button-style-red" data-bs-dismiss="modal">
                                            Cancelar
                                        </button>

                                        <button type="submit" class="button-style">
                                            Cadastrar
                                        </button>
                                    </div>

                                </form>

                            </div>

                        </div>
                    </div>
                </div>

            </div>
          </div>

        </nav>


      </div>
    <!-- End subMenu ------------------------------------------------------------------------------------------------>


    <!-- CONTEÚDO DA PG --------------------------------------------------------------------------------------------->

    <div class="row">
        <div>

            <!-- Cards informativos --------------------------->
            <div class="row">
                <div class="col-sm-6 col-lg-3 mb-3 mb-lg-3 mt-lg-1 ps-0 pe-1 ">

                    <!-- card Total Usuários-->
                    <a class="link-card" href="#">
                        <div class="card-config">
                            <div class="card-body-config">
                                <h6 class="card-subtitle mb-2">TOTAL DE USUÁRIOS</h6>

                                <!-- Linha -->
                                <div class="row align-items-center gx-2">

                                    <div class="col">

                                        <!-- Dados -->
                                        <div class="col-6">
                                            <h3 class="card-title text-inherit">{{totalUsuarios}}</h3>
                                        </div>
                                        <!-- End dados -->

                                        <!-- Grafico -->
                                        <div class="col-6">

                                        </div>
                                        <!-- End Grafico -->

                                    </div>

                                </div>
                                <!-- End Linha -->

                                <span class="span-label-positivo text-success">
                                <i class="fa-solid fa-chart-simple"></i> {{ totalMaster }}% </span>

                                <span> de {{totalUsuariosAnual}}</span>

                            </div>
                        </div>
                    </a>
                    <!-- End card -->

                </div>
                <div class="col-sm-6 col-lg-3 mb-3 mb-lg-3 mt-lg-1 ps-1 pe-1  ">

                    <!-- card Total Funcionário -->
                    <a class="link-card" href="#">
                        <div class="card-config">
                            <div class="card-body-config">
                                <h6 class="card-subtitle mb-2">TOTAL FUNCIONÁRIOS</h6>

                                <!-- Linha -->
                                <div class="row align-items-center gx-2">

                                    <div class="col">

                                        <!-- Dados -->
                                        <div class="col-6">
                                            <h3 class="card-title text-inherit">{{totalColaborador}}</h3>
                                        </div>
                                        <!-- End dados -->

                                        <!-- Grafico -->
                                        <div class="col-6">

                                        </div>
                                        <!-- End Grafico -->

                                    </div>

                                </div>
                                <!-- End Linha -->

                                <span class="span-label-positivo text-success">
                                <i class="fa-solid fa-chart-simple"></i> {{porcentagem_F}}%</span>

                                <span class=" ms-1">de {{AnualFuncionarios}}</span>

                            </div>
                        </div>
                    </a>
                    <!-- End card -->

                </div>
                <div class="col-sm-6 col-lg-3 mb-3 mb-lg-3 mt-lg-1 ps-1 pe-1">

                    <!-- card Total Estagiário-->
                    <a class="link-card" href="#">
                        <div class="card-config">
                            <div class="card-body-config">
                                <h6 class="card-subtitle mb-2">TOTAL ESTAGIÁRIOS</h6>

                                <!-- Linha -->
                                <div class="row align-items-center gx-2">

                                    <div class="col">

                                        <!-- Dados -->
                                        <div class="col-6">
                                            <h3 class="card-title text-inherit">{{ totalEstagiarios }}</h3>
                                        </div>
                                        <!-- End dados -->

                                        <!-- Grafico -->
                                        <div class="col-6">

                                        </div>
                                        <!-- End Grafico -->

                                    </div>

                                </div>
                                <!-- End Linha -->

                                <span class="span-label-positivo text-success">
                                <i class="fa-solid fa-chart-simple"></i> {{porcentagem_E}}%</span>

                                <span class=" ms-1">de {{anualEstagiarios}}</span>

                            </div>
                        </div>
                    </a>
                    <!-- End card -->

                </div>
                <div class="col-sm-6 col-lg-3 mb-3 mb-lg-3 mt-lg-1 ps-1 pe-0 ">

                    <!-- card Total Menos Aprendiz-->
                    <a class="link-card" href="#">
                        <div class="card-config">
                            <div class="card-body-config">
                                <h6 class="card-subtitle mb-2">TOTAL MENOR-APRENDIZ</h6>

                                <!-- Linha -->
                                <div class="row align-items-center gx-2">

                                    <div class="col">

                                        <!-- Dados -->
                                        <div class="col-6">
                                            <h3 class="card-title text-inherit">{{ totalMenor }}</h3>
                                        </div>
                                        <!-- End dados -->

                                        <!-- Grafico -->
                                        <div class="col-6">

                                        </div>
                                        <!-- End Grafico -->

                                    </div>

                                </div>
                                <!-- End Linha -->

                                <span class="span-label-positivo text-success">
                                <i class="fa-solid fa-chart-simple"></i> {{porcentagem_M}}%</span>

                                <span class=" ms-1">de {{anualMenor}}</span>

                            </div>
                        </div>
                    </a>
                    <!-- End card -->

                </div>
            </div>
            <!-- End Cards informativos ----------------------->

        </div>



        <div style="height:57vh;" class="col overflow-auto">

            <!-- Table Usuários ------------------------------->
            <div class="row">
                <div class="card-config p-0">

                    <nav class="navbar mt-2">
                        <div class="container-fluid pe-1">

                            <p style="font-family:Asap Regular; color:#AFAFAF;"></p>

                            <div class="navbar-nav-wrap-content-end" style="position: relative;">
                                <form class="d-flex">
                                    <input class="form-control me-2" type="search" placeholder="Pesquisar"
                                           aria-label="Search">
                                    <!-- Botão Novo Usuário ----------------------->
                                    <button class=""
                                            style="position: absolute; top:12%; right: 5%; border:none; color:#AFAFAF; background-color:white"
                                            type="button"
                                            data-bs-toggle="modal"
                                            data-bs-target=""
                                            data-bs-whatever="@mdo">
                                        <i class="fa-solid fa-magnifying-glass"></i>
                                    </button>
                                </form>
                            </div>

                        </div>

                    </nav>

                    <table class="table table-hover" id="table">

                        <thead class="table-header">
                        <tr>
                            <td class="p-3">

                            <h6></h6>

                            </td>
                            <th>Foto</th>
                            <th>Nome</th>
                            <th>Cargo</th>
                            <th>Status</th>
                            <th>Operações</th>
                            <th>outros</th>
                        </tr>
                        </thead>

                        <tbody class="table-body">

                        {% for dado in dados %}
                        <tr>
                            <!-- checkbox ------------------------------->
                            <td class="table-td">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="">
                                    <label class="form-check-label"></label>
                                </div>
                            </td>

                            <!-- img foto ------------------------------->
                            <td class="table-td">

                                    {% if dado.foto %}
                                    <img class="avatar-img" src="{{ dado.foto.url }}"
                                         alt="" width="40" height="40">
                                    {% else %}
                                    <i class="fa-solid fa-circle-minus"></i>

                                    {% endif %}

                            </td>

                            <!-- Nome e CPF --------------------------->
                            <td class="table-td">
                                <p class="mb-0">{{dado.nomeCompleto}}</p>
                                <small style="color:#888888;" class="mb-0">{{dado.profissional_set.first.colaborador}}</small>
                            </td>

                            <!-- Cargo e local -------------------------->
                            <td class="table-td">
                                <p class="mb-0">{{dado.profissional_set.first.cargo}}</p>
                                <small style="color:#888888;" class="mb-0">{{dado.profissional_set.first.paUnidade}}</small>
                            </td>

                            <!-- Situação ------------------------------->
                            <td class="table-td">
                                {% if dado.profissional_set.first.situacao == 'Ativo' %}
                                <span style="display: inline-block; width:0.5rem; height:0.5rem; background-color:rgb(33,145,128);
                            border-radius:50%; "></span> {{dado.profissional_set.first.situacao}}
                                {% else %}
                                <span style="display: inline-block; width:0.5rem; height:0.5rem; background-color:rgb(255,90,90);
                            border-radius:50%; "></span> {{dado.profissional_set.first.situacao}}
                                {% endif %}
                            </td>

                            <!-- Botão Edtar ---------------------------->
                            <td class="table-td">

                                <button type="button" title="Ver Perfil" class="button-style btn-sm" data-bs-toggle="modal"
                                        data-bs-target="#editUserModal">
                                    <i class="fa-solid fa-user"></i>
                                </button>

                                <button type="button" title="Editar" class="button-style btn-sm" data-bs-toggle="modal"
                                        data-bs-target="#editUserModal">
                                    <i class="fa-solid fa-pen"></i>
                                </button>

                                <button type="button" title="Editar" class="button-style btn-sm" data-bs-toggle="modal"
                                        data-bs-target="#editUserModal">
                                    <i class="fa-sharp fa-solid fa-trash"></i>
                                </button>

                            </td>

                        </tr>
                        {% endfor %}

                        </tbody>

                    </table>

                </div>
            </div>
            <!-- End Table Usuários --------------------------->


        </div>
    </div>

    <!-- END CONTEÚDO ----------------------------------------------------------------------------------------------->

</div>
{% endblock %}